<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/ganru.github.io/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/ganru.github.io/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/ganru.github.io/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/ganru.github.io/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/ganru.github.io/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/ganru.github.io/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/ganru.github.io/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="学习笔记," />










<meta name="description" content="写在前面   该笔记学习的内容均来自于《Python 编程：从入门到实践》，只是作为一个内容总纲，若需详细学习，可去百度网盘下载 ，密码：7rup   游戏简介：  在游戏《外星人入侵》中，玩家控制着一艘最初出现在屏幕底部中央的飞船。玩家可以使用箭头键左右移动飞船，还可使用空格键进行射击。游戏开始时，一群外星人出现在天空中，他们在屏幕中向下移动。玩家的任务是射杀这些外星人。玩家将所有外星人都消灭干">
<meta name="keywords" content="学习笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="小游戏之外星人入侵（第三部分）">
<meta property="og:url" content="https://ganru.github.io/2018/10/10/小游戏之外星人入侵（第三部分）/index.html">
<meta property="og:site_name" content="小黑屋">
<meta property="og:description" content="写在前面   该笔记学习的内容均来自于《Python 编程：从入门到实践》，只是作为一个内容总纲，若需详细学习，可去百度网盘下载 ，密码：7rup   游戏简介：  在游戏《外星人入侵》中，玩家控制着一艘最初出现在屏幕底部中央的飞船。玩家可以使用箭头键左右移动飞船，还可使用空格键进行射击。游戏开始时，一群外星人出现在天空中，他们在屏幕中向下移动。玩家的任务是射杀这些外星人。玩家将所有外星人都消灭干">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://ganru.github.io/ganru.github.io/2018/10/10/小游戏之外星人入侵（第三部分）/1.png">
<meta property="og:image" content="https://ganru.github.io/ganru.github.io/2018/10/10/小游戏之外星人入侵（第三部分）/2.jpg">
<meta property="og:image" content="https://ganru.github.io/ganru.github.io/2018/10/10/小游戏之外星人入侵（第三部分）/3.jpg">
<meta property="og:updated_time" content="2018-10-10T15:22:24.654Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="小游戏之外星人入侵（第三部分）">
<meta name="twitter:description" content="写在前面   该笔记学习的内容均来自于《Python 编程：从入门到实践》，只是作为一个内容总纲，若需详细学习，可去百度网盘下载 ，密码：7rup   游戏简介：  在游戏《外星人入侵》中，玩家控制着一艘最初出现在屏幕底部中央的飞船。玩家可以使用箭头键左右移动飞船，还可使用空格键进行射击。游戏开始时，一群外星人出现在天空中，他们在屏幕中向下移动。玩家的任务是射杀这些外星人。玩家将所有外星人都消灭干">
<meta name="twitter:image" content="https://ganru.github.io/ganru.github.io/2018/10/10/小游戏之外星人入侵（第三部分）/1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/ganru.github.io/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://ganru.github.io/2018/10/10/小游戏之外星人入侵（第三部分）/"/>





  <title>小游戏之外星人入侵（第三部分） | 小黑屋</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/ganru.github.io/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">小黑屋</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/ganru.github.io/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/ganru.github.io/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-essay">
          <a href="/ganru.github.io/categories/随笔" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            随笔
          </a>
        </li>
      
        
        <li class="menu-item menu-item-write">
          <a href="/ganru.github.io/categories/写作" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            写作
          </a>
        </li>
      
        
        <li class="menu-item menu-item-read">
          <a href="/ganru.github.io/categories/阅读" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            阅读
          </a>
        </li>
      
        
        <li class="menu-item menu-item-study">
          <a href="/ganru.github.io/categories/学习" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            学习
          </a>
        </li>
      
        
        <li class="menu-item menu-item-code">
          <a href="/ganru.github.io/categories/编程" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            编程
          </a>
        </li>
      
        
        <li class="menu-item menu-item-py_code">
          <a href="/ganru.github.io/categories/Python笔记" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Python
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://ganru.github.io/ganru.github.io/2018/10/10/小游戏之外星人入侵（第三部分）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ganru">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/ganru.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小黑屋">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">小游戏之外星人入侵（第三部分）</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-10-10T23:14:14+08:00">
                2018-10-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/ganru.github.io/categories/Python笔记/" itemprop="url" rel="index">
                    <span itemprop="name">Python笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><strong><p>写在前面</p></strong></p>
<hr>
<blockquote>
<p>该笔记学习的内容均来自于《Python 编程：从入门到实践》，只是作为一个内容总纲，若需详细学习，可去百度网盘<a href="https://pan.baidu.com/share/init?surl=dFxjtXf" target="_blank" rel="noopener">下载</a> ，密码：7rup</p>
</blockquote>
<blockquote>
<p><em>游戏简介：</em><br>  <em>在游戏《外星人入侵》中，玩家控制着一艘最初出现在屏幕底部中央的飞船。玩家可以使用箭头键左右移动飞船，还可使用空格键进行射击。游戏开始时，一群外星人出现在天空中，他们在屏幕中向下移动。玩家的任务是射杀这些外星人。玩家将所有外星人都消灭干净后，将出现一群新的外星人，他们移动的速度更快。只要有外星人撞到了玩家的飞船或到达了屏幕底部，玩家就损失一艘飞船。玩家损失三艘飞船后，游戏结束。</em></p>
</blockquote>
<h1 id="项目收尾"><a href="#项目收尾" class="headerlink" title="项目收尾"></a>项目收尾</h1><p>学到这里，游戏的基本开发就已经结束了，接下来的无非就是细节的添加。<br>在这一步，我们准备添加的功能有：</p>
<ol>
<li>添加一个Play按钮，让玩家能够开始游戏</li>
<li>游戏结束后再次启动</li>
<li>消灭一群外星人后，加快游戏的节奏</li>
<li>添加一个积分系统</li>
</ol>
<h1 id="Play-按钮"><a href="#Play-按钮" class="headerlink" title="Play 按钮"></a>Play 按钮</h1><p>添加一个按钮，在游戏启动前、游戏结束后出现。<br>为此，我们在 game_stats.py 中输入如下代码：</p>
<pre><code>def __init__(self, ai_settings):
    &quot;&quot;&quot;初始化统计信息&quot;&quot;&quot;
    self.ai_settings = ai_settings
    self.reset_stats()

    # 让游戏一开始处于非活动状态
    self.game_active = False
</code></pre><p>让窗口保持非活跃状态，除非我们手动启动游戏。</p>
<h2 id="创建-Button-类"><a href="#创建-Button-类" class="headerlink" title="创建 Button 类"></a>创建 Button 类</h2><p><strong>button.py</strong></p>
<hr>
<pre><code>import pygame.font

class Button():
    def __init__(self, ai_settings, screen, msg):
        &quot;&quot;&quot;初始化按钮的属性&quot;&quot;&quot;
        self.screen = screen
        self.screen_rect = screen.get_rect()

        # 设置按钮的尺寸和其他属性
        self.width, self.height = 200, 50
        self.button_color = (0, 255, 0)
        self.text_color = (255, 255, 255)
        self.font = pygame.font.SysFont(None, 48)
        # None 表示使用默认字体，48 表示文本号

        # 创建按钮的rect对象，并使其居中
        self.rect = pygame.Rect(0, 0, self.width, self.height)
        self.rect.center = self.screen_rect.center

        # 按钮的标签只需创建一次
        self.prep_msg(msg)

    def prep_msg(self, msg):
        &quot;&quot;&quot;将msg渲染为图像，并使其在按钮上居中&quot;&quot;&quot;
        self.msg_image = self.font.render(
            msg, True, self.text_color, self.button_color)
            # 如果没有指定背景色， Pygame将以透明背景的方式渲染文本

        self.msg_image_rect = self.msg_image.get_rect()
        self.msg_image_rect.center = self.rect.center

    def draw_button(self):
        # 绘制一个用颜色填充的按钮，再绘制文本
        self.screen.fill(self.button_color, self.rect)
        self.screen.blit(self.msg_image, self.msg_image_rect)
</code></pre><p>导入模块 pygame.font，它让 Pygame 能够将文本渲染到屏幕上。msg 是要在按钮中显示的文本。prep_msg() 将你要显示的字符串渲染为图像来处理文本。<br>调用 font.render() 将存储在 msg 中的文本转换为图像，然后将该图像存储在 msg_image 中。<br>方法 font.render() 还接受一个布尔实参，该实参指定开启还是关闭反锯齿功能（反锯齿让文本的边缘更平滑）。</p>
<h2 id="在屏幕上绘制按钮"><a href="#在屏幕上绘制按钮" class="headerlink" title="在屏幕上绘制按钮"></a>在屏幕上绘制按钮</h2><p>创建了 Button 类后，在主程序中添加相关代码：</p>
<pre><code>from button import Button

def run_game():
    --snip--
    pygame.display.set_caption(&quot;Alien Invasion&quot;)

    # 创建Play按钮
    play_button = Button(ai_settings, screen, &quot;Play&quot;)
</code></pre><p>记得修改 while 循环中的参数：</p>
<p><code>gf.update_screen(ai_settings, screen, stats, ship, aliens, bullets, play_button)</code></p>
<p>接下来修改 update_screen()，以便在游戏处于非活动状态时显示 Play 按钮：</p>
<pre><code>def update_screen(ai_settings, screen, stats, ship, aliens, bullets, play_button):
    &quot;&quot;&quot;更新屏幕上的图像，并切换到新屏幕&quot;&quot;&quot;
    --snip--

    # 如果游戏处于非活动状态，就绘制Play按钮
    if not stats.game_active:
        play_button.draw_button()
</code></pre><p>此时运行，将会看到：<br><img src="/ganru.github.io/2018/10/10/小游戏之外星人入侵（第三部分）/1.png"></p>
<h2 id="响应按钮"><a href="#响应按钮" class="headerlink" title="响应按钮"></a>响应按钮</h2><p>在 game_functions 模块中的 check_events 函数添加：</p>
<pre><code>def check_events(ai_settings, screen, stats, play_button, ship, bullets):
    --snip--
    for event in pygame.event.get():
        --snip--
        elif event.type == pygame.MOUSEBUTTONDOWN:
            mouse_x, mouse_y = pygame.mouse.get_pos()
            check_play_button(stats, play_button, mouse_x, mouse_y)

def check_play_button(stats, play_button, mouse_x, mouse_y):
    &quot;&quot;&quot;在玩家单击Play按钮时开始新游戏&quot;&quot;&quot;
    if play_button.rect.collidepoint(mouse_x, mouse_y):
        stats.game_active = True
</code></pre><p>无论玩家单击屏幕的什么地方， Pygame 都将检测到一个 MOUSEBUTTONDOWN 事件，但我们只想让这个游戏在玩家用鼠标单击 Play 按钮时作出响应。为此，我们使用了 pygame.mouse.get_pos()，它返回一个元组，其中包含玩家单击时鼠标的x和y坐标。<br> collidepoint() 检查鼠标单击位置是否在 Play 按钮的 rect 内。</p>
<p>然后主程序修改下 <code>gf.check_events(ai_settings, screen, stats, play_button, ship, bullets)</code> 加几个形参。</p>
<h2 id="游戏重置"><a href="#游戏重置" class="headerlink" title="游戏重置"></a>游戏重置</h2><p>游戏结束后，为了让玩家再次点击按钮能够开始新一轮游戏，我们需要把所有游戏信息重置。<br>在 game_functions 中，更新 check_play_button() 的定义：</p>
<pre><code>def check_play_button(ai_settings, screen, stats,
    play_button, ship, aliens, bullets, mouse_x, mouse_y):
    &quot;&quot;&quot;在玩家单击Play按钮时开始新游戏&quot;&quot;&quot;
    if play_button.rect.collidepoint(mouse_x, mouse_y):
        # 重置游戏统计信息
        stats.reset_stats()

        # 清空外星人列表和子弹列表
        aliens.empty()
        bullets.empty()

        # 创建一群新的外星人，并让飞船居中
        create_fleet(ai_settings, screen, ship, aliens)
        ship.center_ship()

        stats.game_active = True
</code></pre><p>函数要导入新的形参，以便游戏的刷新。<br>改了这个函数，相对应的各个函数也得改：</p>
<pre><code>def check_events(ai_settings, screen, stats, play_button, ship, aliens, 
    bullets):
    --snip--
        check_play_button(ai_settings, screen, stats, play_button, ship,
            aliens, bullets, mouse_x, mouse_y)

主程序中的调用：
while True:
    gf.check_events(ai_settings, screen, stats, play_button, ship, aliens, bullets)
</code></pre><h2 id="BUG-修复"><a href="#BUG-修复" class="headerlink" title="BUG 修复"></a>BUG 修复</h2><p>玩的时候，发现虽然按钮消失了，但是要是继续按按钮图案所在地，游戏一样会重置。<br>为修复这个问题，可让游戏仅在 game_active 为 False 时才开始：</p>
<pre><code>def check_play_button(ai_settings, screen, stats, play_button, ship, aliens,
    bullets, mouse_x, mouse_y):
    &quot;&quot;&quot;玩家单击Play按钮时开始新游戏&quot;&quot;&quot;
    button_clicked = play_button.rect.collidepoint(mouse_x, mouse_y)
    if button_clicked and not stats.game_active:
        #重置游戏统计信息
        --snip--
</code></pre><p>无非就是 if 语句判断条件再多加个判断值。</p>
<h1 id="隐藏光标"><a href="#隐藏光标" class="headerlink" title="隐藏光标"></a>隐藏光标</h1><p>为让玩家能够开始游戏，我们要让光标可见，但游戏开始后，光标只会添乱。为修复这种问题，我们在游戏处于活动状态时让光标不可见。</p>
<p>在上面的函数 check_play_button 中新加一段：</p>
<pre><code>def check_play_button(ai_settings, screen, stats, play_button, ship, aliens,
    bullets, mouse_x, mouse_y):
    &quot;&quot;&quot;玩家单击Play按钮时开始新游戏&quot;&quot;&quot;
    button_clicked = play_button.rect.collidepoint(mouse_x, mouse_y)
    if button_clicked and not stats.game_active:
        # 隐藏光标
        pygame.mouse.set_visible(False)
        --snip--
</code></pre><p>通过向 set_visible() 传递 False，让 Pygame 在光标位于游戏窗口内时将其隐藏起来。<br>但是游戏结束后，我们要让光标重新出现：</p>
<pre><code>def ship_hit(ai_settings, screen, stats, ship, aliens, bullets):
    &quot;&quot;&quot;响应飞船被外星人撞到&quot;&quot;&quot;
    if stats.ships_left &gt; 0:
        --snip--
    else:
        stats.game_active = False
        pygame.mouse.set_visible(True)    # 新增
</code></pre><h1 id="游戏难度"><a href="#游戏难度" class="headerlink" title="游戏难度"></a>游戏难度</h1><p>我们可以设定：打完这群外星人后，加快游戏节奏。</p>
<h2 id="速度设置"><a href="#速度设置" class="headerlink" title="速度设置"></a>速度设置</h2><p>在文件 settings.py 中添加：</p>
<pre><code>def __init__(self):
    --snip--
    # 以什么样的速度加快游戏节奏
    self.speedup_scale = 1.1
    self.initialize_dynamic_settings()

def initialize_dynamic_settings(self):
    &quot;&quot;&quot;初始化随游戏进行而变化的设置&quot;&quot;&quot;
    self.ship_speed_factor = 1.5
    self.bullet_speed_factor = 3
    self.alien_speed_factor = 1

    # fleet_direction为1表示向右；为-1表示向左
    self.fleet_direction = 1

def increase_speed(self):
    &quot;&quot;&quot;提高速度设置&quot;&quot;&quot;
    self.ship_speed_factor *= self.speedup_scale
    self.bullet_speed_factor *= self.speedup_scale
    self.alien_speed_factor *= self.speedup_scale
</code></pre><p>然后修改 game_functions 中的 check_bullet_alien_collisions() 函数：</p>
<pre><code>def check_bullet_alien_collisions(ai_settings, screen, ship, aliens, bullets):
    &quot;&quot;&quot;响应子弹和外星人的碰撞&quot;&quot;&quot;
    --snip--

    if len(aliens) == 0:
        # 删除现有的所有子弹，并创建一个新的外星人群，游戏节奏加速
        bullets.empty()
        ai_settings.increase_speed()    # 新增
        create_fleet(ai_settings, screen, ship, aliens)
</code></pre><h2 id="速度重置"><a href="#速度重置" class="headerlink" title="速度重置"></a>速度重置</h2><p>每次启动新游戏的时候，速度也要重置。<br><strong>game_functions.py</strong></p>
<pre><code>def check_play_button(ai_settings, screen, stats, play_button, ship, aliens,
    bullets, mouse_x, mouse_y):
    &quot;&quot;&quot;在玩家单击Play按钮时开始新游戏&quot;&quot;&quot;
    button_clicked = play_button.rect.collidepoint(mouse_x, mouse_y)
    if button_clicked and not stats.game_active:
        # 重置游戏设置
        ai_settings.initialize_dynamic_settings()    # 新增

        # 隐藏光标
        pygame.mouse.set_visible(False)
        --snip--
</code></pre><h1 id="计分模式"><a href="#计分模式" class="headerlink" title="计分模式"></a>计分模式</h1><p>我们在 game_stats 中的 reset_stats() 加入一段：</p>
<p><code>self.score = 0</code></p>
<p>为在每次开始游戏时都重置得分，我们在 reset_stats() 而不是 __init__() 中初始化 score。</p>
<p>为在屏幕上显示得分，我们首先创建一个新类 Scoreboard 。</p>
<p><strong>scoreboard.py</strong></p>
<hr>
<pre><code>import pygame.font

class Scoreboard():
    &quot;&quot;&quot;显示得分信息的类&quot;&quot;&quot;

    def __init__(self, ai_settings, screen, stats):
        &quot;&quot;&quot;初始化显示得分涉及的属性&quot;&quot;&quot;
        self.screen = screen
        self.screen_rect = screen.get_rect()
        self.ai_settings = ai_settings
        self.stats = stats

        # 显示得分信息时使用的字体设置
        self.text_color = (30, 30, 30)
        self.font = pygame.font.SysFont(None, 48)

        # 准备初始得分图像
        self.prep_score()

    def prep_score(self):
        &quot;&quot;&quot;将得分转换为一幅渲染的图像&quot;&quot;&quot;
        score_str = str(self.stats.score)
        self.score_image = self.font.render(score_str, True, self.text_color,
            self.ai_settings.bg_color)

        # 将得分放在屏幕右上角
        self.score_rect = self.score_image.get_rect()
        self.score_rect.right = self.screen_rect.right - 20
        self.score_rect.top = 20

    def show_score(self):
        &quot;&quot;&quot;在屏幕上显示得分&quot;&quot;&quot;
        self.screen.blit(self.score_image, self.score_rect)
</code></pre><p>因为要在屏幕上显示文本，所以我们导入 pygame.font 。<br>然后，修改 game_functions 的函数 update_screen:</p>
<pre><code>def update_screen(ai_settings, screen, stats, sb, ship, aliens, bullets,
    play_button):
    # 显示得分
    sb.show_score()
    --snip--
</code></pre><p>然后，在主程序中写入：</p>
<pre><code>from scoreboard import Scoreboard

def run_game():
    --snip--
    # 创建存储游戏统计信息的实例，并创建记分牌
    stats = GameStats(ai_settings)
    sb = Scoreboard(ai_settings, screen, stats)
    --snip--
    # 开始游戏主循环
    while True:
        gf.update_screen(ai_settings, screen, stats, sb, ship, aliens, bullets,
            play_button)    # 加个形参
</code></pre><p>结果如下：<br><img src="/ganru.github.io/2018/10/10/小游戏之外星人入侵（第三部分）/2.jpg"></p>
<h1 id="实时更新得分"><a href="#实时更新得分" class="headerlink" title="实时更新得分"></a>实时更新得分</h1><p>我们令击杀一个外星人得到的分为 50 。<br><strong>settings.py</strong></p>
<pre><code>def initialize_dynamic_settings(self):
    --snip--
    # 记分
    self.alien_points = 50
</code></pre><p><strong>game_functions.py</strong></p>
<pre><code>def check_bullet_alien_collisions(ai_settings, screen, stats, sb, ship, 
    aliens, bullets):
    collisions = pygame.sprite.groupcollide(bullets, aliens, True, True)

    if collisions:
        stats.score += ai_settings.alien_points
        sb.prep_score()        # 实时更新得分图像
</code></pre><p>新增形参 stats 和 sb 。<br>修改之后由于新增形参的关系，update_bullets() 函数也受到了影响。</p>
<pre><code>def update_bullets(ai_settings, screen, stats, sb, ship, aliens, bullets):
    &quot;&quot;&quot;更新子弹的位置，并删除已消失的子弹&quot;&quot;&quot;
    --snip--

    check_bullet_alien_collisions(ai_settings, screen, stats, sb, ship,
        aliens, bullets)
</code></pre><p>修改主程序实时更新函数：</p>
<p><code>gf.update_bullets(ai_settings, screen, stats, sb, ship, aliens, bullets)</code></p>
<p>写到这里，做了个测试，发现大子弹打中多个敌人时加的分只有 50 ，这个我们需要考虑。<br>前面我们创建了一个实例 collisions ，它接收因子弹与外星人碰撞得到的结果而形成的字典。在 check_bullet_alien_collisions() 中，与外星人碰撞的子弹都是字典 collisions 中的一个键；而与每颗子弹相关的值都是一个列表，其中包含该子弹撞到的外星人。<br>每击杀一个外星人，字典都会新增一个 value 。所以我们可以遍历该字典。</p>
<pre><code>def check_bullet_alien_collisions(ai_settings, screen, stats, sb, ship, 
    aliens, bullets):
    &quot;&quot;&quot;响应子弹和外星人的碰撞&quot;&quot;&quot;
    # 删除发生碰撞的子弹和外星人
    collisions = pygame.sprite.groupcollide(bullets, aliens, True, True)

    if collisions:
        for aliens in collisions.values():
            stats.score += ai_settings.alien_points * len(aliens)
            sb.prep_score()
</code></pre><h1 id="提高点数"><a href="#提高点数" class="headerlink" title="提高点数"></a>提高点数</h1><p>游戏越难，点数应该越高，不然没什么意思。</p>
<pre><code>class Settings():
    &quot;&quot;&quot;存储游戏《外星人入侵》的所有设置的类&quot;&quot;&quot;

    def __init__(self):
        --snip--
        # 加快游戏节奏的速度
        self.speedup_scale = 1.1
        # 外星人点数的提高速度
        self.score_scale = 1.5    # 新增

        self.initialize_dynamic_settings()

    def increase_speed(self):
        &quot;&quot;&quot;提高速度设置和外星人点数&quot;&quot;&quot;
        self.ship_speed_factor *= self.speedup_scale
        self.bullet_speed_factor *= self.speedup_scale
        self.alien_speed_factor *= self.speedup_scale

        self.alien_points = int(self.alien_points * self.score_scale)    # 新增
        print(self.alien_points)
</code></pre><p>为检验效果，我们可以加一条语句 <code>print(self.alien_points)</code> 看看在终端他的速度变化。不过记得删掉。</p>
<h1 id="将得分圆整"><a href="#将得分圆整" class="headerlink" title="将得分圆整"></a>将得分圆整</h1><p>将得分显示为 10 的整数倍。<br>我们修改一下 scoreboard:</p>
<pre><code>def prep_score(self):
    &quot;&quot;&quot;将得分转换为一幅渲染的图像&quot;&quot;&quot;
    rounded_score = int(round(self.stats.score, -1))
    score_str = &quot;{:,}&quot;.format(rounded_score)
    self.score_image = self.font.render(score_str, True, self.text_color,
        self.ai_settings.bg_color)

    --snip--
</code></pre><p>函数 round() 通常让小数精确到小数点后多少位，其中小数位数是由第二个实参指定的。如果将第二个实参指定为负数， round() 将圆整到最近的 10、100、1000 等整数倍。<br>“{:,}” 是字符串格式设置指令，它让 Python 将数值转换为字符串时在其中插入逗号，例如，输出 1,000,000 而不是 1000000。</p>
<h1 id="最高得分"><a href="#最高得分" class="headerlink" title="最高得分"></a>最高得分</h1><p>注意，任何情况下都不会重置它。所以，我们将它放在 __init__() 中。<br><strong>game_stats.py</strong></p>
<pre><code>def __init__(self, ai_settings):
    --snip--
    # 在任何情况下都不应重置最高得分
    self.high_score = 0
</code></pre><p>然后我们要显示这个图像：<br><strong>scoreboard.py</strong></p>
<pre><code>def __init__(self, ai_settings, screen, stats):
    --snip--
    # 准备包含最高得分和当前得分的图像
    self.prep_score()
    self.prep_high_score()

def prep_high_score(self):
    &quot;&quot;&quot;将最高得分转换为渲染的图像&quot;&quot;&quot;
    high_score = int(round(self.stats.high_score, -1))
    high_score_str = &quot;{:,}&quot;.format(high_score)
    self.high_score_image = self.font.render(high_score_str, True,
        self.text_color, self.ai_settings.bg_color)

    # 将最高得分放在屏幕顶部中央
    self.high_score_rect = self.high_score_image.get_rect()
    self.high_score_rect.centerx = self.screen_rect.centerx
    self.high_score_rect.top = self.score_rect.top    # 保持和得分图像 y 高度一致
</code></pre><p>显示最高得分：</p>
<pre><code>def show_score(self):
    &quot;&quot;&quot;在屏幕上显示得分和最高得分&quot;&quot;&quot;
    self.screen.blit(self.score_image, self.score_rect)
    self.screen.blit(self.high_score_image, self.high_score_rect)
</code></pre><p>我们还要加个检测机制，判断是否有最高得分出现：<br><strong>game_functions.py</strong></p>
<pre><code>def check_high_score(stats, sb):
    &quot;&quot;&quot;检查是否诞生了新的最高得分&quot;&quot;&quot;
    if stats.score &gt; stats.high_score:
        stats.high_score = stats.score
        sb.prep_high_score()

def check_bullet_alien_collisions(ai_settings, screen, stats, sb, ship, 
    aliens, bullets):
    --snip--

    if collisions:
        for aliens in collisions.values():
            stats.score += ai_settings.alien_points * len(aliens)
            sb.prep_score()
        check_high_score(stats, sb)        # 新增
</code></pre><h1 id="显示当前难度等级"><a href="#显示当前难度等级" class="headerlink" title="显示当前难度等级"></a>显示当前难度等级</h1><p>为确保每次开始新游戏时都重置等级，在 reset_stats() 中初始化它：<br><strong>game_stats.py</strong></p>
<pre><code>def reset_stats(self):
    &quot;&quot;&quot;初始化随游戏进行可能变化的统计信息&quot;&quot;&quot;
    self.ships_left = self.ai_settings.ship_limit
    self.score = 0
    self.level = 1
</code></pre><p>显示等级：<br><strong>scoreboard.py</strong></p>
<pre><code>def __init__(self, ai_settings, screen, stats):
    --snip--

    # 准备包含得分的初始图像
    self.prep_score()
    self.prep_high_score()
    self.prep_level()

def prep_level(self):
    &quot;&quot;&quot;将等级转换为渲染的图像&quot;&quot;&quot;
    self.level_image = self.font.render(str(self.stats.level), True,
        self.text_color, self.ai_settings.bg_color)

    # 将等级放在得分下方
    self.level_rect = self.level_image.get_rect()
    self.level_rect.right = self.score_rect.right
    self.level_rect.top = self.score_rect.bottom + 10

def show_score(self):
    &quot;&quot;&quot;在屏幕上显示飞船和得分&quot;&quot;&quot;
    self.screen.blit(self.score_image, self.score_rect)
    self.screen.blit(self.high_score_image, self.high_score_rect)
    self.screen.blit(self.level_image, self.level_rect)
</code></pre><p>结果如下：<br><img src="/ganru.github.io/2018/10/10/小游戏之外星人入侵（第三部分）/3.jpg"></p>
<h1 id="等级更新"><a href="#等级更新" class="headerlink" title="等级更新"></a>等级更新</h1><p>打完一波后，升级。<br><strong>game_functions.py</strong></p>
<pre><code>def check_bullet_alien_collisions(ai_settings, screen, stats, sb, ship,
    aliens, bullets):
    --snip--
    if len(aliens) == 0:
        # 如果整群外星人都被消灭，就提高一个等级
        bullets.empty()
        ai_settings.increase_speed()

        # 提高等级
        stats.level += 1
        sb.prep_level()
</code></pre><h1 id="开始新游戏时重置积分与等级"><a href="#开始新游戏时重置积分与等级" class="headerlink" title="开始新游戏时重置积分与等级"></a>开始新游戏时重置积分与等级</h1><p><strong>game_functions.py</strong></p>
<pre><code>def check_play_button(ai_settings, screen, stats, sb, play_button, ship,
    aliens, bullets, mouse_x, mouse_y):

    # 重置游戏统计信息
    stats.reset_stats()
    stats.game_active = True

    # 重置记分牌图像
    sb.prep_score()
    sb.prep_high_score()
    sb.prep_level()
</code></pre><p>新增形参 sb ，新增的代码要在重置游戏统计信息之前。<br>更新会调用到它的函数：</p>
<pre><code>def check_events(ai_settings, screen, stats, sb, play_button, ship, aliens,
    bullets):
    --snip--

        elif event.type == pygame.MOUSEBUTTONDOWN:
            mouse_x, mouse_y = pygame.mouse.get_pos()
            check_play_button(ai_settings, screen, stats, sb, 
                play_button, ship, aliens, bullets, mouse_x, mouse_y)
</code></pre><p>更新主程序：</p>
<pre><code>while True:
    gf.check_events(ai_settings, screen, stats, sb, play_button, ship, aliens, bullets)
</code></pre><h1 id="剩余生命值"><a href="#剩余生命值" class="headerlink" title="剩余生命值"></a>剩余生命值</h1><p>使用图形而不是数字。<br>让 ship 继承 Sprite 类。<br><strong>ship.py</strong></p>
<pre><code>from pygame.sprite import Sprite

class Ship(Sprite):

    def __init__(self, ai_settings, screen):
        &quot;&quot;&quot;初始化飞船，并设置其起始位置&quot;&quot;&quot;
        super(Ship, self).__init__()
        --snip--
</code></pre><p>修改 Scoreboard ，在其中创建一个可供显示的飞船编组。<br><strong>scoreboard.py</strong></p>
<pre><code>from pygame.sprite import Group

from ship import Ship

    --snip--
    def __init__(self, ai_settings, screen, stats):
        --snip--
        self.prep_level()
        self.prep_ships()    # 新增
        --snip--

    def prep_ships(self):
        &quot;&quot;&quot;显示还余下多少艘飞船&quot;&quot;&quot;
        self.ships = Group()
        for ship_number in range(self.stats.ships_left):
            # 飞船数目列表化生成 {1, 2, 3}（相当于从 1 数到 3 ）
            ship = Ship(self.ai_settings, self.screen)
            ship.rect.x = 10 + ship_number * ship.rect.width
            ship.rect.y = 10
            self.ships.add(ship)

    def show_score(self):
        &quot;&quot;&quot;在屏幕上显示飞船和得分&quot;&quot;&quot;
        self.screen.blit(self.score_image, self.score_rect)
        self.screen.blit(self.high_score_image, self.high_score_rect)
        self.screen.blit(self.level_image, self.level_rect)

        # 绘制飞船
        self.ships.draw(self.screen)
</code></pre><p>跳转到 game_functions 中的 check_play_button：</p>
<pre><code># 重置记分牌图像
    sb.prep_score()
    sb.prep_high_score()
    sb.prep_level()
    sb.prep_ships()        # 新增
</code></pre><p>在游戏开始时显示飞船生命。</p>
<p>此外，如果玩家飞船撞毁，更新飞船剩余生命：<br><strong>game_functions.py</strong></p>
<pre><code>def update_aliens(ai_settings, stats, `sb`, screen, ship, aliens, bullets):
    &quot;&quot;&quot;检查是否有外星人位于屏幕边缘，并更新整群外星人的位置&quot;&quot;&quot;
    check_fleet_edges(ai_settings, aliens)
    aliens.update()

    # 检测外星人和飞船之间的碰撞
    if pygame.sprite.spritecollideany(ship, aliens):
        ship_hit(ai_settings, stats, `sb`, screen, ship, aliens, bullets)

    # 检查是否有外星人到达屏幕底端
    check_aliens_bottom(ai_settings, stats, `sb`, screen, ship, aliens, bullets)

def check_aliens_bottom(ai_settings, stats, `sb`, screen, ship, aliens, bullets):
    &quot;&quot;&quot;检查是否有外星人到达了屏幕底端&quot;&quot;&quot;
    screen_rect = screen.get_rect()
    for alien in aliens.sprites():
        if alien.rect.bottom &gt;= screen_rect.bottom:
            # 像飞船被撞到一样进行处理
            ship_hit(ai_settings, stats, `sb`, screen, ship, aliens, bullets)
            break

def ship_hit(ai_settings, stats, `sb`, screen, ship, aliens, bullets):
    &quot;&quot;&quot;响应被外星人撞到的飞船&quot;&quot;&quot;
    if stats.ships_left &gt; 0:
        # 将 ships_left 减 1
        stats.ships_left -= 1

        # 更新记分牌
        sb.prep_ships()        # 新增
</code></pre><p>变化在于新增了行代码 <code>sb.prep_ships()</code>，不过有几个函数受 ship_hit 影响，故贴出其他函数。<br>主函数也受到了影响：</p>
<p><code>gf.update_aliens(ai_settings, stats, sb, screen, ship, aliens, bullets)</code></p>
<h1 id="学习要点"><a href="#学习要点" class="headerlink" title="学习要点"></a>学习要点</h1><ol>
<li>如何创建用于开始新游戏的Play按钮</li>
<li>如何检测鼠标事件</li>
<li>如何显示\隐藏光标</li>
<li>如何随游戏的进行调整其节奏</li>
<li>如何实现记分系统</li>
<li>如何以文本和非文本方式显示信息</li>
</ol>
<h1 id="此部分各组件源码"><a href="#此部分各组件源码" class="headerlink" title="此部分各组件源码"></a>此部分各组件源码</h1><h2 id="alien-invasion-py"><a href="#alien-invasion-py" class="headerlink" title="alien_invasion.py"></a>alien_invasion.py</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">import pygame</span><br><span class="line">from pygame.sprite import Group</span><br><span class="line"></span><br><span class="line">from settings import Settings</span><br><span class="line">from game_stats import GameStats</span><br><span class="line">from scoreboard import Scoreboard</span><br><span class="line">from button import Button</span><br><span class="line">from ship import Ship</span><br><span class="line">import game_functions as gf</span><br><span class="line"></span><br><span class="line">def run_game():</span><br><span class="line">	# 初始化游戏并创建一个屏幕对象</span><br><span class="line">	pygame.init()</span><br><span class="line">	ai_settings = Settings()</span><br><span class="line">	screen = pygame.display.set_mode(</span><br><span class="line">		(ai_settings.screen_width, ai_settings.screen_height))</span><br><span class="line">	pygame.display.set_caption(&quot;Alien Invasion&quot;)	#窗口名称</span><br><span class="line">	</span><br><span class="line">	# 创建存储游戏统计信息的实例，并创建记分牌</span><br><span class="line">	stats = GameStats(ai_settings)</span><br><span class="line">	sb = Scoreboard(ai_settings, screen, stats)</span><br><span class="line">	</span><br><span class="line">	# 创建飞船</span><br><span class="line">	ship = Ship(ai_settings, screen)</span><br><span class="line">	</span><br><span class="line">	# 创建一个用于存储子弹的编组</span><br><span class="line">	bullets = Group()</span><br><span class="line">	</span><br><span class="line">	# 创建外星人编组</span><br><span class="line">	aliens = Group()</span><br><span class="line">	</span><br><span class="line">	# 创建外星人群</span><br><span class="line">	gf.create_fleet(ai_settings, screen, ship, aliens)</span><br><span class="line">	</span><br><span class="line">	# 创建Play按钮</span><br><span class="line">	play_button = Button(ai_settings, screen, &quot;Play&quot;)</span><br><span class="line">	</span><br><span class="line">	# 开始游戏的主循环</span><br><span class="line">	while True:</span><br><span class="line">		gf.check_events(ai_settings, screen, stats, sb, play_button, ship, aliens, bullets)</span><br><span class="line">		</span><br><span class="line">		if stats.game_active:</span><br><span class="line">			ship.update()	# 飞船的位置将在检测到键盘事件后（但在更新屏幕前）更新</span><br><span class="line">			gf.update_bullets(ai_settings, screen, stats, sb, ship, aliens, bullets)</span><br><span class="line">			gf.update_aliens(ai_settings, stats, sb, screen, ship, aliens, bullets)</span><br><span class="line">		</span><br><span class="line">		gf.update_screen(ai_settings, screen, stats, sb, ship, aliens, bullets, play_button)</span><br><span class="line"></span><br><span class="line">run_game()</span><br></pre></td></tr></table></figure>
<h2 id="game-functions-py"><a href="#game-functions-py" class="headerlink" title="game_functions.py"></a>game_functions.py</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br></pre></td><td class="code"><pre><span class="line">import sys</span><br><span class="line">from time import sleep</span><br><span class="line"></span><br><span class="line">import pygame</span><br><span class="line"></span><br><span class="line">from bullet import Bullet</span><br><span class="line">from alien import Alien</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def check_keydown_events(event, ai_settings, screen, ship, bullets):</span><br><span class="line">	&quot;&quot;&quot;响应按键&quot;&quot;&quot;</span><br><span class="line">	if event.key == pygame.K_RIGHT:</span><br><span class="line">		ship.moving_right = True</span><br><span class="line">	elif event.key == pygame.K_LEFT:</span><br><span class="line">		ship.moving_left = True</span><br><span class="line">	elif event.key == pygame.K_SPACE:</span><br><span class="line">		fire_bullet(ai_settings, screen, ship, bullets)</span><br><span class="line">	elif event.key == pygame.K_q:</span><br><span class="line">		sys.exit()</span><br><span class="line"></span><br><span class="line">def check_keyup_events(event, ship):</span><br><span class="line">	&quot;&quot;&quot;响应松开&quot;&quot;&quot;</span><br><span class="line">	if event.key == pygame.K_RIGHT:</span><br><span class="line">		ship.moving_right = False</span><br><span class="line">	elif event.key == pygame.K_LEFT:</span><br><span class="line">		ship.moving_left = False</span><br><span class="line"></span><br><span class="line">def check_events(ai_settings, screen, stats, sb, play_button, ship, aliens, bullets):</span><br><span class="line">	&quot;&quot;&quot;响应按键和鼠标事件&quot;&quot;&quot;</span><br><span class="line">	for event in pygame.event.get():</span><br><span class="line">		if event.type == pygame.QUIT:</span><br><span class="line">			sys.exit()</span><br><span class="line">			</span><br><span class="line">		elif event.type == pygame.KEYDOWN:</span><br><span class="line">			check_keydown_events(event, ai_settings, screen, ship, bullets)</span><br><span class="line">		elif event.type == pygame.KEYUP:</span><br><span class="line">			check_keyup_events(event, ship)</span><br><span class="line">		</span><br><span class="line">		elif event.type == pygame.MOUSEBUTTONDOWN:</span><br><span class="line">			mouse_x, mouse_y = pygame.mouse.get_pos()</span><br><span class="line">			check_play_button(ai_settings, screen, stats, sb, </span><br><span class="line">				play_button, ship, aliens, bullets, mouse_x, mouse_y)</span><br><span class="line"></span><br><span class="line">def check_play_button(ai_settings, screen, stats, sb, </span><br><span class="line">	play_button, ship, aliens, bullets, mouse_x, mouse_y):</span><br><span class="line">	&quot;&quot;&quot;在玩家单击Play按钮时开始新游戏&quot;&quot;&quot;</span><br><span class="line">	button_clicked = play_button.rect.collidepoint(mouse_x, mouse_y)</span><br><span class="line">	if button_clicked and not stats.game_active:</span><br><span class="line">		</span><br><span class="line">		# 重置游戏统计信息</span><br><span class="line">		stats.reset_stats()</span><br><span class="line">		stats.game_active = True</span><br><span class="line">		</span><br><span class="line">		# 重置记分牌图像</span><br><span class="line">		sb.prep_score()</span><br><span class="line">		sb.prep_high_score()</span><br><span class="line">		sb.prep_level()</span><br><span class="line">		sb.prep_ships()</span><br><span class="line">		</span><br><span class="line">		# 清空外星人列表和子弹列表</span><br><span class="line">		aliens.empty()</span><br><span class="line">		bullets.empty()</span><br><span class="line">		</span><br><span class="line">		# 重置游戏设置</span><br><span class="line">		ai_settings.initialize_dynamic_settings()</span><br><span class="line"></span><br><span class="line">		# 隐藏光标</span><br><span class="line">		pygame.mouse.set_visible(False)</span><br><span class="line">		</span><br><span class="line">		# 创建一群新的外星人，并让飞船居中</span><br><span class="line">		create_fleet(ai_settings, screen, ship, aliens)</span><br><span class="line">		ship.center_ship()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def update_screen(ai_settings, screen, stats, sb, ship, aliens, bullets,</span><br><span class="line">		play_button):</span><br><span class="line">	&quot;&quot;&quot;更新屏幕上的图像，并切换到新屏幕&quot;&quot;&quot;</span><br><span class="line">	</span><br><span class="line">	# 每次循环时都重绘屏幕</span><br><span class="line">	screen.fill(ai_settings.bg_color)</span><br><span class="line">	# 重绘所有子弹</span><br><span class="line">	for bullet in bullets.sprites():</span><br><span class="line">		bullet.draw_bullet()</span><br><span class="line">	ship.blitme()</span><br><span class="line">	aliens.draw(screen)	# 括号记得导入窗口参数</span><br><span class="line">	</span><br><span class="line">	# 显示得分</span><br><span class="line">	sb.show_score()</span><br><span class="line">	</span><br><span class="line">	# 如果游戏处于非活动状态，就绘制Play按钮</span><br><span class="line">	if not stats.game_active:</span><br><span class="line">		play_button.draw_button()</span><br><span class="line">	</span><br><span class="line">	# 让最近绘制的屏幕可见</span><br><span class="line">	pygame.display.flip()</span><br><span class="line"></span><br><span class="line">def update_bullets(ai_settings, screen, stats, sb, ship, aliens, bullets):</span><br><span class="line">	&quot;&quot;&quot;更新子弹的位置，并删除已消失的子弹&quot;&quot;&quot;</span><br><span class="line">	# 更新子弹的位置</span><br><span class="line">	bullets.update()	# 这步看不懂的话注意一下模块 game_functions.check_keydown_events() 函数</span><br><span class="line">	</span><br><span class="line">	# 删除已消失的子弹</span><br><span class="line">	for bullet in bullets.copy():</span><br><span class="line">		if bullet.rect.bottom &lt;= 0:</span><br><span class="line">			bullets.remove(bullet)</span><br><span class="line">	</span><br><span class="line">	# 响应子弹与外星人的碰撞</span><br><span class="line">	check_bullet_alien_collisions(ai_settings, screen, stats, sb, ship, </span><br><span class="line">		aliens, bullets)</span><br><span class="line"></span><br><span class="line">def check_bullet_alien_collisions(ai_settings, screen, stats, sb, ship, </span><br><span class="line">		aliens, bullets):</span><br><span class="line">	&quot;&quot;&quot;响应子弹和外星人的碰撞&quot;&quot;&quot;</span><br><span class="line">	# 删除发生碰撞的子弹和外星人</span><br><span class="line">	collisions = pygame.sprite.groupcollide(bullets, aliens, True, True)</span><br><span class="line">	</span><br><span class="line">	if collisions:</span><br><span class="line">		for aliens in collisions.values():</span><br><span class="line">			stats.score += ai_settings.alien_points * len(aliens)</span><br><span class="line">			sb.prep_score()</span><br><span class="line">		check_high_score(stats, sb)</span><br><span class="line">	</span><br><span class="line">	if len(aliens) == 0:</span><br><span class="line">		# 删除现有的所有子弹，并创建一个新的外星人群，游戏节奏加速</span><br><span class="line">		bullets.empty()</span><br><span class="line">		ai_settings.increase_speed()</span><br><span class="line">		</span><br><span class="line">		# 提高等级</span><br><span class="line">		stats.level += 1</span><br><span class="line">		sb.prep_level()</span><br><span class="line">		</span><br><span class="line">		create_fleet(ai_settings, screen, ship, aliens)</span><br><span class="line"></span><br><span class="line">def fire_bullet(ai_settings, screen, ship, bullets):</span><br><span class="line">	&quot;&quot;&quot;如果还没有到达限制，就发射一颗子弹&quot;&quot;&quot;</span><br><span class="line">	#创建新子弹，并将其加入到编组bullets中</span><br><span class="line">	if len(bullets) &lt; ai_settings.bullets_allowed:</span><br><span class="line">		new_bullet = Bullet(ai_settings, screen, ship)</span><br><span class="line">		bullets.add(new_bullet)</span><br><span class="line"></span><br><span class="line">def get_number_aliens_x(ai_settings, alien_width):</span><br><span class="line">	&quot;&quot;&quot;计算每行可容纳多少个外星人&quot;&quot;&quot;</span><br><span class="line">	available_space_x = ai_settings.screen_width - 2 * alien_width</span><br><span class="line">	number_aliens_x = int(available_space_x / (2 * alien_width))</span><br><span class="line">	return number_aliens_x</span><br><span class="line"></span><br><span class="line">def get_number_rows(ai_settings, ship_height, alien_height):</span><br><span class="line">	&quot;&quot;&quot;计算屏幕可容纳多少行外星人&quot;&quot;&quot;</span><br><span class="line">	available_space_y = (ai_settings.screen_height - </span><br><span class="line">		(3 * alien_height) - ship_height)</span><br><span class="line">	number_rows = int(available_space_y / (2 * alien_height))</span><br><span class="line">	return number_rows</span><br><span class="line"></span><br><span class="line">def create_alien(ai_settings, screen, aliens, alien_number, row_number):</span><br><span class="line">	&quot;&quot;&quot;创建一个外星人并将其放在当前行&quot;&quot;&quot;</span><br><span class="line">	alien = Alien(ai_settings, screen)</span><br><span class="line">	alien_width = alien.rect.width</span><br><span class="line">	</span><br><span class="line">	# 不要两句并一句，因为在 Alien 类中，我们设定了 alien.x 可以保存小数值</span><br><span class="line">	alien.x = alien_width + 2 * alien_width * alien_number</span><br><span class="line">	alien.rect.x = alien.x</span><br><span class="line">	</span><br><span class="line">	alien.rect.y = alien.rect.height + 2 * alien.rect.height * row_number</span><br><span class="line">	aliens.add(alien)</span><br><span class="line"></span><br><span class="line">def create_fleet(ai_settings, screen, ship, aliens):</span><br><span class="line">	&quot;&quot;&quot;创建外星人群&quot;&quot;&quot;</span><br><span class="line">	# 创建一个外星人，并计算一行可容纳多少个外星人</span><br><span class="line">	# 外星人间距为外星人宽度</span><br><span class="line">	alien = Alien(ai_settings, screen)</span><br><span class="line">	number_aliens_x = get_number_aliens_x(ai_settings, alien.rect.width)</span><br><span class="line">	number_rows = get_number_rows(</span><br><span class="line">		ai_settings, ship.rect.height, alien.rect.height)</span><br><span class="line">	# 创建第一行外星人</span><br><span class="line">	</span><br><span class="line">	for row_number in range(number_rows):</span><br><span class="line">		for alien_number in range(number_aliens_x):</span><br><span class="line">			# 创建一个外星人并将其加入当前行</span><br><span class="line">			create_alien(ai_settings, screen, aliens, alien_number, row_number)</span><br><span class="line">	</span><br><span class="line">def check_fleet_edges(ai_settings, aliens):</span><br><span class="line">	&quot;&quot;&quot;有外星人到达边缘时采取相应的措施&quot;&quot;&quot;</span><br><span class="line">	for alien in aliens.sprites():</span><br><span class="line">		if alien.check_edges():</span><br><span class="line">			change_fleet_direction(ai_settings, aliens)</span><br><span class="line">			break</span><br><span class="line"></span><br><span class="line">def change_fleet_direction(ai_settings, aliens):</span><br><span class="line">	&quot;&quot;&quot;将整群外星人下移，并改变它们的方向&quot;&quot;&quot;</span><br><span class="line">	for alien in aliens.sprites():</span><br><span class="line">		alien.rect.y += ai_settings.fleet_drop_speed</span><br><span class="line">	ai_settings.fleet_direction *= -1</span><br><span class="line">	</span><br><span class="line">def update_aliens(ai_settings, stats, sb, screen, ship, aliens, bullets):</span><br><span class="line">	&quot;&quot;&quot;检查是否有外星人位于屏幕边缘，并更新整群外星人的位置&quot;&quot;&quot;</span><br><span class="line">	check_fleet_edges(ai_settings, aliens)</span><br><span class="line">	aliens.update()</span><br><span class="line">	</span><br><span class="line">	# 检测外星人和飞船之间的碰撞</span><br><span class="line">	if pygame.sprite.spritecollideany(ship, aliens):</span><br><span class="line">		ship_hit(ai_settings, stats, sb, screen, ship, aliens, bullets)</span><br><span class="line">	</span><br><span class="line">	# 检查是否有外星人到达屏幕底端</span><br><span class="line">	check_aliens_bottom(ai_settings, stats, sb, screen, ship, aliens, bullets)</span><br><span class="line"></span><br><span class="line">def check_aliens_bottom(ai_settings, stats, sb, screen, ship, aliens, bullets):</span><br><span class="line">	&quot;&quot;&quot;检查是否有外星人到达了屏幕底端&quot;&quot;&quot;</span><br><span class="line">	screen_rect = screen.get_rect()</span><br><span class="line">	for alien in aliens.sprites():</span><br><span class="line">		if alien.rect.bottom &gt;= screen_rect.bottom:</span><br><span class="line">			# 像飞船被撞到一样进行处理</span><br><span class="line">			ship_hit(ai_settings, stats, sb, screen, ship, aliens, bullets)</span><br><span class="line">			break</span><br><span class="line"></span><br><span class="line">def ship_hit(ai_settings, stats, sb, screen, ship, aliens, bullets):</span><br><span class="line">	&quot;&quot;&quot;响应被外星人撞到的飞船&quot;&quot;&quot;</span><br><span class="line">	if stats.ships_left &gt; 0:</span><br><span class="line">		# 将 ships_left 减 1</span><br><span class="line">		stats.ships_left -= 1</span><br><span class="line">		</span><br><span class="line">		# 更新记分牌</span><br><span class="line">		sb.prep_ships()</span><br><span class="line">		</span><br><span class="line">		# 清空外星人列表和子弹列表</span><br><span class="line">		aliens.empty()</span><br><span class="line">		bullets.empty()</span><br><span class="line">		</span><br><span class="line">		# 创建一群新的外星人，并将飞船放到屏幕底端中央</span><br><span class="line">		create_fleet(ai_settings, screen, ship, aliens)</span><br><span class="line">		ship.center_ship()</span><br><span class="line">		</span><br><span class="line">		# 暂停</span><br><span class="line">		sleep(0.5)</span><br><span class="line">	</span><br><span class="line">	else:</span><br><span class="line">		stats.game_active = False</span><br><span class="line">		pygame.mouse.set_visible(True)</span><br><span class="line">		</span><br><span class="line">def check_high_score(stats, sb):</span><br><span class="line">	&quot;&quot;&quot;检查是否诞生了新的最高得分&quot;&quot;&quot;</span><br><span class="line">	if stats.score &gt; stats.high_score:</span><br><span class="line">		stats.high_score = stats.score</span><br><span class="line">		sb.prep_high_score()</span><br></pre></td></tr></table></figure>
<h2 id="settings-py"><a href="#settings-py" class="headerlink" title="settings.py"></a>settings.py</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">class Settings():</span><br><span class="line">	&quot;&quot;&quot;存储《外星人入侵》的所有设置的类&quot;&quot;&quot;</span><br><span class="line">	</span><br><span class="line">	def __init__(self):</span><br><span class="line">		&quot;&quot;&quot;初始化游戏的静态设置&quot;&quot;&quot;</span><br><span class="line">		# 屏幕设置</span><br><span class="line">		self.screen_width = 1200</span><br><span class="line">		self.screen_height = 800</span><br><span class="line">		self.bg_color = (230, 230, 230)</span><br><span class="line">		</span><br><span class="line">		# 飞船的设置</span><br><span class="line">		self.ship_speed_factor = 1.5</span><br><span class="line">		self.ship_limit = 3</span><br><span class="line">		</span><br><span class="line">		# 子弹设置</span><br><span class="line">		self.bullet_speed_factor = 3</span><br><span class="line">		self.bullet_width = 3</span><br><span class="line">		self.bullet_height = 15</span><br><span class="line">		self.bullet_color = 60, 60, 60</span><br><span class="line">		self.bullets_allowed = 3</span><br><span class="line">		</span><br><span class="line">		# 外星人设置</span><br><span class="line">		self.alien_speed_factor = 1</span><br><span class="line">		self.fleet_drop_speed = 10</span><br><span class="line">		# fleet_direction 为 1 表示向右移，为 - 1 表示向左移</span><br><span class="line">		self.fleet_direction = 1</span><br><span class="line">		</span><br><span class="line">		# 以什么样的速度加快游戏节奏</span><br><span class="line">		self.speedup_scale = 1.1</span><br><span class="line">		self.initialize_dynamic_settings()</span><br><span class="line">		</span><br><span class="line">		# 外星人点数的提高速度</span><br><span class="line">		self.score_scale = 1.5</span><br><span class="line">		</span><br><span class="line">	def initialize_dynamic_settings(self):</span><br><span class="line">		&quot;&quot;&quot;初始化随游戏进行而变化的设置&quot;&quot;&quot;</span><br><span class="line">		self.ship_speed_factor = 1.5</span><br><span class="line">		self.bullet_speed_factor = 3</span><br><span class="line">		self.alien_speed_factor = 1</span><br><span class="line">		</span><br><span class="line">		# fleet_direction为 1 表示向右；为 -1 表示向左</span><br><span class="line">		self.fleet_direction = 1</span><br><span class="line">		</span><br><span class="line">		# 记分</span><br><span class="line">		self.alien_points = 50</span><br><span class="line">	</span><br><span class="line">	def increase_speed(self):</span><br><span class="line">		&quot;&quot;&quot;提高速度设置与外星人点数&quot;&quot;&quot;</span><br><span class="line">		self.ship_speed_factor *= self.speedup_scale</span><br><span class="line">		self.bullet_speed_factor *= self.speedup_scale</span><br><span class="line">		self.alien_speed_factor *= self.speedup_scale</span><br><span class="line">		</span><br><span class="line">		self.alien_points = int(self.alien_points * self.score_scale)</span><br></pre></td></tr></table></figure>
<h2 id="ship-py"><a href="#ship-py" class="headerlink" title="ship.py"></a>ship.py</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">import pygame</span><br><span class="line">from pygame.sprite import Sprite</span><br><span class="line"></span><br><span class="line">class Ship(Sprite):</span><br><span class="line"></span><br><span class="line">	def __init__(self, ai_settings, screen):</span><br><span class="line">		&quot;&quot;&quot;初始化飞船并设置其初始位置&quot;&quot;&quot;</span><br><span class="line">		super(Ship, self).__init__()</span><br><span class="line">		self.screen = screen</span><br><span class="line">		self.ai_settings = ai_settings</span><br><span class="line">		</span><br><span class="line">		# 加载飞船图像并获取其外接矩形</span><br><span class="line">		self.image = pygame.image.load(&apos;images/ship.bmp&apos;)</span><br><span class="line">		self.rect = self.image.get_rect()</span><br><span class="line">		self.screen_rect = screen.get_rect()</span><br><span class="line">		</span><br><span class="line">		# 将每艘新飞船放在屏幕底部中央</span><br><span class="line">		self.rect.centerx = self.screen_rect.centerx</span><br><span class="line">		self.rect.bottom = self.screen_rect.bottom</span><br><span class="line">		</span><br><span class="line">		# 在飞船的属性center中存储小数值</span><br><span class="line">		self.center = float(self.rect.centerx)</span><br><span class="line">		</span><br><span class="line">		# 移动标志</span><br><span class="line">		self.moving_right = False</span><br><span class="line">		self.moving_left = False</span><br><span class="line">		</span><br><span class="line">	def update(self):</span><br><span class="line">		&quot;&quot;&quot;根据移动标志调整飞船的位置&quot;&quot;&quot;</span><br><span class="line">		# 更新飞船的 center 值，而不是 rect</span><br><span class="line">		if self.moving_right and self.rect.right &lt; self.screen_rect.right:</span><br><span class="line">		# self.rect.right 是飞船图案的右边坐标</span><br><span class="line">			self.center += self.ai_settings.ship_speed_factor</span><br><span class="line">		if self.moving_left and self.rect.left &gt; 0:</span><br><span class="line">			self.center -= self.ai_settings.ship_speed_factor</span><br><span class="line">			</span><br><span class="line">		# 根据self.center更新rect对象</span><br><span class="line">		self.rect.centerx = self.center</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">	def blitme(self):</span><br><span class="line">		&quot;&quot;&quot;在指定位置绘制飞船&quot;&quot;&quot;</span><br><span class="line">		self.screen.blit(self.image, self.rect)</span><br><span class="line"></span><br><span class="line">	def center_ship(self):</span><br><span class="line">		&quot;&quot;&quot;让飞船在屏幕上居中&quot;&quot;&quot;</span><br><span class="line">		self.center = self.screen_rect.centerx</span><br></pre></td></tr></table></figure>
<h2 id="bullet-py"><a href="#bullet-py" class="headerlink" title="bullet.py"></a>bullet.py</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">import pygame</span><br><span class="line">from pygame.sprite import Sprite</span><br><span class="line"></span><br><span class="line">class Bullet(Sprite):</span><br><span class="line">	&quot;&quot;&quot;一个对飞船发射的子弹进行管理的类&quot;&quot;&quot;</span><br><span class="line">	</span><br><span class="line">	def __init__(self, ai_settings, screen, ship):</span><br><span class="line">		&quot;&quot;&quot;在飞船所处的位置创建一个子弹对象&quot;&quot;&quot;</span><br><span class="line">		super().__init__()</span><br><span class="line">		self.screen = screen</span><br><span class="line">		</span><br><span class="line">		# 在(0,0)处创建一个表示子弹的矩形，再设置正确的位置</span><br><span class="line">		self.rect = pygame.Rect(0, 0, ai_settings.bullet_width, ai_settings.bullet_height)</span><br><span class="line">		self.rect.centerx = ship.rect.centerx</span><br><span class="line">		self.rect.top = ship.rect.top</span><br><span class="line">		</span><br><span class="line">		#存储用小数表示的子弹位置</span><br><span class="line">		self.y = float(self.rect.y)</span><br><span class="line">		self.color = ai_settings.bullet_color</span><br><span class="line">		self.speed_factor = ai_settings.bullet_speed_factor</span><br><span class="line">	</span><br><span class="line">	def update(self):</span><br><span class="line">		&quot;&quot;&quot;向上移动子弹&quot;&quot;&quot;</span><br><span class="line">		#更新表示子弹位置的小数值</span><br><span class="line">		self.y -= self.speed_factor</span><br><span class="line">		#更新表示子弹的rect的位置</span><br><span class="line">		self.rect.y = self.y</span><br><span class="line">		</span><br><span class="line">	def draw_bullet(self):</span><br><span class="line">		&quot;&quot;&quot;在屏幕上绘制子弹&quot;&quot;&quot;</span><br><span class="line">		pygame.draw.rect(self.screen, self.color, self.rect)</span><br></pre></td></tr></table></figure>
<h2 id="alien-py"><a href="#alien-py" class="headerlink" title="alien.py"></a>alien.py</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">import pygame</span><br><span class="line"></span><br><span class="line">from pygame.sprite import Sprite</span><br><span class="line"></span><br><span class="line">class Alien(Sprite):</span><br><span class="line">	&quot;&quot;&quot;表示单个外星人的类&quot;&quot;&quot;</span><br><span class="line">	def __init__(self, ai_settings, screen):</span><br><span class="line">		&quot;&quot;&quot;初始化外星人并设置其起始位置&quot;&quot;&quot;</span><br><span class="line">		super().__init__()</span><br><span class="line">		self.screen = screen</span><br><span class="line">		self.ai_settings = ai_settings</span><br><span class="line">		</span><br><span class="line">		# 加载外星人的图像并矩形化</span><br><span class="line">		self.image = pygame.image.load(&apos;images/alien.bmp&apos;)</span><br><span class="line">		self.rect = self.image.get_rect()</span><br><span class="line">		</span><br><span class="line">		# 设置外星人的左边距、上边距</span><br><span class="line">		#（其实就是令外星人图像左上角的坐标点该位于何方）</span><br><span class="line">		self.rect.x = self.rect.width</span><br><span class="line">		self.rect.y = self.rect.height</span><br><span class="line">		</span><br><span class="line">		# 存储外星人的准确位置</span><br><span class="line">		self.x = float(self.rect.x)</span><br><span class="line">	</span><br><span class="line">	def blitme(self):</span><br><span class="line">		&quot;&quot;&quot;在指定位置绘制外星人&quot;&quot;&quot;</span><br><span class="line">		self.screen.blit(self.image, self.rect)</span><br><span class="line"></span><br><span class="line">	def update(self):</span><br><span class="line">		&quot;&quot;&quot;左右移动外星人&quot;&quot;&quot;</span><br><span class="line">		self.x += (self.ai_settings.alien_speed_factor * self.ai_settings.fleet_direction)</span><br><span class="line">		self.rect.x = self.x</span><br><span class="line">	</span><br><span class="line">	def check_edges(self):</span><br><span class="line">		&quot;&quot;&quot;如果外星人位于屏幕边缘，就返回True&quot;&quot;&quot;</span><br><span class="line">		screen_rect = self.screen.get_rect()</span><br><span class="line">		if self.rect.right &gt;= screen_rect.right:</span><br><span class="line">			return True</span><br><span class="line">		elif self.rect.left &lt;= 0:</span><br><span class="line">			return True</span><br></pre></td></tr></table></figure>
<h2 id="game-stats-py"><a href="#game-stats-py" class="headerlink" title="game_stats.py"></a>game_stats.py</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">class GameStats():</span><br><span class="line">	&quot;&quot;&quot;跟踪游戏的统计信息&quot;&quot;&quot;</span><br><span class="line">	</span><br><span class="line">	def __init__(self, ai_settings):</span><br><span class="line">		&quot;&quot;&quot;初始化统计信息&quot;&quot;&quot;</span><br><span class="line">		self.ai_settings = ai_settings</span><br><span class="line">		self.reset_stats()</span><br><span class="line">		</span><br><span class="line">		# 在任何情况下都不应重置最高得分</span><br><span class="line">		self.high_score = 0</span><br><span class="line">		</span><br><span class="line">		# 游戏刚启动时处于非活动状态</span><br><span class="line">		self.game_active = False</span><br><span class="line">	</span><br><span class="line">	def reset_stats(self):</span><br><span class="line">		&quot;&quot;&quot;初始化在游戏运行期间可能变化的统计信息&quot;&quot;&quot;</span><br><span class="line">		self.ships_left = self.ai_settings.ship_limit</span><br><span class="line">		self.score = 0</span><br><span class="line">		self.level = 1</span><br></pre></td></tr></table></figure>
<h2 id="button-py"><a href="#button-py" class="headerlink" title="button.py"></a>button.py</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">import pygame.font</span><br><span class="line"></span><br><span class="line">class Button():</span><br><span class="line">	def __init__(self, ai_settings, screen, msg):</span><br><span class="line">		&quot;&quot;&quot;初始化按钮的属性&quot;&quot;&quot;</span><br><span class="line">		self.screen = screen</span><br><span class="line">		self.screen_rect = screen.get_rect()</span><br><span class="line">	</span><br><span class="line">		# 设置按钮的尺寸和其他属性</span><br><span class="line">		self.width, self.height = 200, 50</span><br><span class="line">		self.button_color = (0, 255, 0)</span><br><span class="line">		self.text_color = (255, 255, 255)</span><br><span class="line">		self.font = pygame.font.SysFont(None, 48)</span><br><span class="line">		</span><br><span class="line">		# 创建按钮的rect对象，并使其居中</span><br><span class="line">		self.rect = pygame.Rect(0, 0, self.width, self.height)</span><br><span class="line">		self.rect.center = self.screen_rect.center</span><br><span class="line">		</span><br><span class="line">		# 按钮的标签只需创建一次</span><br><span class="line">		self.prep_msg(msg)</span><br><span class="line">	</span><br><span class="line">	def prep_msg(self, msg):</span><br><span class="line">		&quot;&quot;&quot;将msg渲染为图像，并使其在按钮上居中&quot;&quot;&quot;</span><br><span class="line">		self.msg_image = self.font.render(</span><br><span class="line">			msg, True, self.text_color, self.button_color)</span><br><span class="line">			# 如果没有指定背景色， Pygame将以透明背景的方式渲染文本</span><br><span class="line">		</span><br><span class="line">		self.msg_image_rect = self.msg_image.get_rect()</span><br><span class="line">		self.msg_image_rect.center = self.rect.center</span><br><span class="line">	</span><br><span class="line">	def draw_button(self):</span><br><span class="line">		# 绘制一个用颜色填充的按钮，再绘制文本</span><br><span class="line">		self.screen.fill(self.button_color, self.rect)</span><br><span class="line">		self.screen.blit(self.msg_image, self.msg_image_rect)</span><br></pre></td></tr></table></figure>
<h2 id="scoreboard-py"><a href="#scoreboard-py" class="headerlink" title="scoreboard.py"></a>scoreboard.py</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">import pygame.font</span><br><span class="line">from pygame.sprite import Group</span><br><span class="line"></span><br><span class="line">from ship import Ship</span><br><span class="line"></span><br><span class="line">class Scoreboard():</span><br><span class="line">	&quot;&quot;&quot;显示得分信息的类&quot;&quot;&quot;</span><br><span class="line">	</span><br><span class="line">	def __init__(self, ai_settings, screen, stats):</span><br><span class="line">		&quot;&quot;&quot;初始化显示得分涉及的属性&quot;&quot;&quot;</span><br><span class="line">		self.screen = screen</span><br><span class="line">		self.screen_rect = screen.get_rect()</span><br><span class="line">		self.ai_settings = ai_settings</span><br><span class="line">		self.stats = stats</span><br><span class="line">		</span><br><span class="line">		# 显示得分信息时使用的字体设置</span><br><span class="line">		self.text_color = (30, 30, 30)</span><br><span class="line">		self.font = pygame.font.SysFont(None, 48)</span><br><span class="line">		</span><br><span class="line">		# 准备包含最高得分和当前得分的图像</span><br><span class="line">		self.prep_score()</span><br><span class="line">		self.prep_high_score()</span><br><span class="line">		self.prep_level()</span><br><span class="line">		self.prep_ships()</span><br><span class="line">		</span><br><span class="line">	def prep_score(self):</span><br><span class="line">		&quot;&quot;&quot;将得分转换为一幅渲染的图像&quot;&quot;&quot;</span><br><span class="line">		rounded_score = int(round(self.stats.score, -1))</span><br><span class="line">		score_str = &quot;&#123;:,&#125;&quot;.format(rounded_score)</span><br><span class="line">		self.score_image = self.font.render(score_str, True, self.text_color,</span><br><span class="line">			self.ai_settings.bg_color)</span><br><span class="line">		</span><br><span class="line">		# 将得分放在屏幕右上角</span><br><span class="line">		self.score_rect = self.score_image.get_rect()</span><br><span class="line">		self.score_rect.right = self.screen_rect.right - 20</span><br><span class="line">		self.score_rect.top = 20</span><br><span class="line">		</span><br><span class="line">	def prep_high_score(self):</span><br><span class="line">		&quot;&quot;&quot;将最高得分转换为渲染的图像&quot;&quot;&quot;</span><br><span class="line">		high_score = int(round(self.stats.high_score, -1))</span><br><span class="line">		high_score_str = &quot;&#123;:,&#125;&quot;.format(high_score)</span><br><span class="line">		self.high_score_image = self.font.render(high_score_str, True,</span><br><span class="line">			self.text_color, self.ai_settings.bg_color)</span><br><span class="line"></span><br><span class="line">		#将最高得分放在屏幕顶部中央</span><br><span class="line">		self.high_score_rect = self.high_score_image.get_rect()</span><br><span class="line">		self.high_score_rect.centerx = self.screen_rect.centerx</span><br><span class="line">		self.high_score_rect.top = self.score_rect.top</span><br><span class="line">		</span><br><span class="line">	def prep_level(self):</span><br><span class="line">		&quot;&quot;&quot;将等级转换为渲染的图像&quot;&quot;&quot;</span><br><span class="line">		self.level_image = self.font.render(str(self.stats.level), True,</span><br><span class="line">			self.text_color, self.ai_settings.bg_color)</span><br><span class="line">		</span><br><span class="line">		# 将等级放在得分下方</span><br><span class="line">		self.level_rect = self.level_image.get_rect()</span><br><span class="line">		self.level_rect.right = self.score_rect.right</span><br><span class="line">		self.level_rect.top = self.score_rect.bottom + 10</span><br><span class="line">	</span><br><span class="line">	def prep_ships(self):</span><br><span class="line">		&quot;&quot;&quot;显示还余下多少艘飞船&quot;&quot;&quot;</span><br><span class="line">		self.ships = Group()</span><br><span class="line">		for ship_number in range(self.stats.ships_left):</span><br><span class="line">			ship = Ship(self.ai_settings, self.screen)</span><br><span class="line">			ship.rect.x = 10 + ship_number * ship.rect.width</span><br><span class="line">			ship.rect.y = 10</span><br><span class="line">			self.ships.add(ship)</span><br><span class="line">	</span><br><span class="line">	def show_score(self):</span><br><span class="line">		&quot;&quot;&quot;在屏幕上显示飞船和得分&quot;&quot;&quot;</span><br><span class="line">		self.screen.blit(self.score_image, self.score_rect)</span><br><span class="line">		self.screen.blit(self.high_score_image, self.high_score_rect)</span><br><span class="line">		self.screen.blit(self.level_image, self.level_rect)</span><br><span class="line">		</span><br><span class="line">		# 绘制飞船</span><br><span class="line">		self.ships.draw(self.screen)</span><br></pre></td></tr></table></figure>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/ganru.github.io/tags/学习笔记/" rel="tag"># 学习笔记</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/ganru.github.io/2018/10/07/小游戏之外星人入侵（第二部分）/" rel="next" title="小游戏之外星人入侵（第二部分）">
                <i class="fa fa-chevron-left"></i> 小游戏之外星人入侵（第二部分）
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/ganru.github.io/2018/10/13/python-之装饰器解析/" rel="prev" title="python 之装饰器解析">
                python 之装饰器解析 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Ganru</p>
              <p class="site-description motion-element" itemprop="description">学习一向都是孤独的，慢慢玩。</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/ganru.github.io/archives/">
              
                  <span class="site-state-item-count">19</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">分类</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#项目收尾"><span class="nav-number">1.</span> <span class="nav-text">项目收尾</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Play-按钮"><span class="nav-number">2.</span> <span class="nav-text">Play 按钮</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#创建-Button-类"><span class="nav-number">2.1.</span> <span class="nav-text">创建 Button 类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#在屏幕上绘制按钮"><span class="nav-number">2.2.</span> <span class="nav-text">在屏幕上绘制按钮</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#响应按钮"><span class="nav-number">2.3.</span> <span class="nav-text">响应按钮</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#游戏重置"><span class="nav-number">2.4.</span> <span class="nav-text">游戏重置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#BUG-修复"><span class="nav-number">2.5.</span> <span class="nav-text">BUG 修复</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#隐藏光标"><span class="nav-number">3.</span> <span class="nav-text">隐藏光标</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#游戏难度"><span class="nav-number">4.</span> <span class="nav-text">游戏难度</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#速度设置"><span class="nav-number">4.1.</span> <span class="nav-text">速度设置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#速度重置"><span class="nav-number">4.2.</span> <span class="nav-text">速度重置</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#计分模式"><span class="nav-number">5.</span> <span class="nav-text">计分模式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#实时更新得分"><span class="nav-number">6.</span> <span class="nav-text">实时更新得分</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#提高点数"><span class="nav-number">7.</span> <span class="nav-text">提高点数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#将得分圆整"><span class="nav-number">8.</span> <span class="nav-text">将得分圆整</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#最高得分"><span class="nav-number">9.</span> <span class="nav-text">最高得分</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#显示当前难度等级"><span class="nav-number">10.</span> <span class="nav-text">显示当前难度等级</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#等级更新"><span class="nav-number">11.</span> <span class="nav-text">等级更新</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#开始新游戏时重置积分与等级"><span class="nav-number">12.</span> <span class="nav-text">开始新游戏时重置积分与等级</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#剩余生命值"><span class="nav-number">13.</span> <span class="nav-text">剩余生命值</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#学习要点"><span class="nav-number">14.</span> <span class="nav-text">学习要点</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#此部分各组件源码"><span class="nav-number">15.</span> <span class="nav-text">此部分各组件源码</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#alien-invasion-py"><span class="nav-number">15.1.</span> <span class="nav-text">alien_invasion.py</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#game-functions-py"><span class="nav-number">15.2.</span> <span class="nav-text">game_functions.py</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#settings-py"><span class="nav-number">15.3.</span> <span class="nav-text">settings.py</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ship-py"><span class="nav-number">15.4.</span> <span class="nav-text">ship.py</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#bullet-py"><span class="nav-number">15.5.</span> <span class="nav-text">bullet.py</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#alien-py"><span class="nav-number">15.6.</span> <span class="nav-text">alien.py</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#game-stats-py"><span class="nav-number">15.7.</span> <span class="nav-text">game_stats.py</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#button-py"><span class="nav-number">15.8.</span> <span class="nav-text">button.py</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#scoreboard-py"><span class="nav-number">15.9.</span> <span class="nav-text">scoreboard.py</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ganru</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/ganru.github.io/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/ganru.github.io/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/ganru.github.io/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/ganru.github.io/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/ganru.github.io/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/ganru.github.io/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/ganru.github.io/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/ganru.github.io/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/ganru.github.io/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/ganru.github.io/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/ganru.github.io/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/ganru.github.io/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/ganru.github.io/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
